<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="apple-mobile-web-app-capable" content="yes" />

        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/menu.css" />
        <link rel="stylesheet" type="text/css" href="res/jquerymobile/jquery.mobile-1.4.5.min.css" />
        <link rel="stylesheet" type="text/css" href="res/jquerymobile/jquery.mobile.theme-1.4.5.min.css" />
        <title>LAP - Naviagtion automatique</title>
    </head>
    <body>
    <div id="menu">
    <h3>Menu</h3>
    <ul>
        <li class="active"><a href="#home" class="contentLink">Profil </a></li>
        <li><a href="#home" class="contentLink">Trajets </a></li>
        <li><a href="nouveau_trajet.html" class="contentLink">Nouveau </a></li>
        <li><a href="#home" class="contentLink">Navigation </a></li>
    </ul>
</div>
    <div data-role="page" id="page-automatique">
        <div data-role="header" data-theme="a">
        <a href="#"class="showMenu">Menu</a>
            <h1>Navigation Manuelle</h1>
        </div>
        <div data-role="content">
            <div>Titre de votre trajet</div>
            <input type="text" name="titreManuelle" id="titreManuelle" value="">
            <div>Temps de votre trajet</div>
            <input type="text" name="tempsManuelle" id="tempsManuelle" value="">
            <div>Vitesse moyenne</div>
            <input type="text" name="vitesseManuelle" id="vitesseManuelle" value="">
            <div>Meteo lors de votre trajet</div>
            <input type="text" name="meteoManuelle" id="meteoManuelle" value="">
            <div>Type de route emprintee</div>
            <input type="text" name="routeManuelle" id="routeManuelle" value="">
            <div>Vous avez conduit de: (jour/nuit)</div>
            <input type="text" name="periodeManuelle" id="periodeManuelle" value="">
            
            <div id="auto_map_div" style="width:1000px;height:500px"></div>
            <input type="button" id="calculerDistance" value="Calculer Distance">
        </div>
        <div data-role="footer" data-position="fixed" data-tap-toggle="false">
            <div data-role="navbar">
            </div><!-- /navbar -->
        </div>
    </div>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="res/jquerymobile/jquery.mobile-1.4.5.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/localhelper.js"></script>
        <script type="text/javascript" src="js/urlHelper.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/main-config.js"></script>
        <script type="text/javascript" src="js/menu.js"></script>
        <script type="text/javascript" src="js/fonctionMap.js"></script>
        <script type="text/javascript" src="js/trajet.js"></script>
        <script type="text/javascript" src="js/tools.js"></script>
        <script type="text/javascript">

            // pour initialiser l'app
            app.initialize();


            myMap = new fonctionMap('auto_map_div').init();
            var mapGoogle = myMap.getMap();
         
            google.maps.event.addListener(mapGoogle, 'click', function(event) {
                var id = myMap.uniqid();
                myMap.addMarker(id,event.latLng);
            });
            $("#calculerDistance").click(function(){
                
                var depart = myMap.getMarker(0);
                var arrivee = myMap.getMarker(myMap.getSize()-1);
                var distance = getTotalKilometers(myMap.getMarkers());
                alert(distance);

                var trajet1 = new trajet("manuel");
                trajet1.setTitre($("titreManuelle").val());
                trajet1.setDepart(depart);
                trajet1.setArrivee(arrivee);
                trajet1.setDistanceTotale(17);
                trajet1.setTempsTotal($("tempsManuelle").val());
                trajet1.setVitesseMoyenne($("vitesseManuelle").val());
                trajet1.setMeteo($("meteoManuelle").val());
                trajet1.setTypeRoute($("routeManuelle").val());
                trajet1.setPeriode($("periodeManuelle").val());

                trajet1.save();
            });
        </script>
    </body>
</html>